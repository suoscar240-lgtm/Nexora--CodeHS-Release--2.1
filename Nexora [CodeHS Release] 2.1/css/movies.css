.vidplus-movies {
  --panel: var(--surface, #1a100d);
  --panel-2: var(--surface-2, #1f1410);
  --muted: var(--muted, #c9a08a);
  --text: var(--text, #f8e7e0);
  --radius: var(--radius, 12px);
  --accent-gradient: linear-gradient(90deg, var(--primary-deep, #ff4d00) 0%, var(--primary, #ff6a00) 52%, color-mix(in srgb, var(--primary, #ff8400) 100%, transparent 0%));
  --play-text: var(--on-primary, #fff0e8);
  --page-bg: var(--page-bg, #0a0605);
  --primary-shadow: var(--primary-shadow, rgba(196,78,27,0.75));
  font-family: Inter, system-ui, Roboto, Arial;
}

.vidplus-movies *, .vidplus-movies *::before, .vidplus-movies *::after { box-sizing: border-box; }

.vidplus-movies {
  margin: 32px auto;
  max-width: 980px;
  padding: 20px;
  border-radius: var(--radius);
  background: transparent;
  box-shadow: none;
  width: calc(100% - 48px);
  color: var(--text);
  background: var(--page-bg);
  box-sizing: border-box;
}

.vidplus-movies .top { display:flex; align-items:flex-start; gap:12px; margin-bottom:18px; flex-wrap:wrap; }
.vidplus-movies .tabs { display:flex; gap:8px; padding:8px; border-radius:12px; background: linear-gradient(180deg, var(--panel), var(--panel-2)); align-items:center; }

.vidplus-movies .tab {
  display:flex; align-items:center; justify-content:center;
  padding:0.6rem 1.2rem; border-radius:12px;
  color:var(--muted); cursor:pointer; font-weight:700;
  min-height:44px; min-width:110px; box-sizing:border-box;
  transition: background .15s, color .15s, box-shadow .15s;
}
.vidplus-movies .tab.active {
  background: var(--accent-gradient);
  color: var(--play-text);
  box-shadow: 2px 3px 24px -4px var(--primary-shadow);
}
.vidplus-movies .tab:not(.active):hover {
  background: var(--page-bg);
  color: var(--play-text);
}

.vidplus-movies .controls { display:flex; gap:12px; align-items:flex-end; flex:1; min-width:0; }
.vidplus-movies .controls-inner { display:flex; gap:12px; align-items:center; width:100%; min-height:0; flex-wrap:wrap; }

.vidplus-movies .field { display:flex; flex-direction:column; gap:6px; min-width:0; }
.vidplus-movies label { font-size:13px; color: var(--muted); }
.vidplus-movies input, .vidplus-movies select {
  padding:10px; border-radius:10px;
  border:1px solid color-mix(in srgb, var(--panel) 6%, #000 0%);
  background: color-mix(in srgb, var(--panel-2) 8%, transparent);
  color: var(--text); outline:none; min-width:0;
}
.vidplus-movies input::placeholder { color: color-mix(in srgb, var(--text) 16%, transparent); }

.vidplus-movies .searchWrap { position:relative; min-width:0; flex:1 1 auto; transition: max-width .18s ease; z-index:1100; transform: translateZ(0); }

.vidplus-movies .results {
  position:absolute; z-index:2147483646; left:0; top:calc(100% + 6px);
  background: var(--page-bg);
  border: 1px solid color-mix(in srgb, var(--panel) 6%, #000 0%);
  width:100%; max-height:360px; overflow:auto; border-radius:12px;
  padding:6px; box-shadow: 0 8px 30px rgba(0,0,0,0.6);
  will-change: transform, opacity; pointer-events:auto;
}
.vidplus-movies .results[data-clamped="true"] { z-index:99999; }

.vidplus-movies .result { display:flex; gap:10px; padding:8px; border-radius:10px; cursor:pointer; align-items:center; transition: background .12s ease, transform .12s ease; }
.vidplus-movies .result:hover { background: color-mix(in srgb, var(--panel-2) 6%, transparent); transform: translateX(2px); }

.vidplus-movies .poster { width:44px; height:66px; object-fit:cover; border-radius:6px; flex-shrink:0; }
.vidplus-movies .rmeta { font-size:13px; color: var(--muted); }
.vidplus-movies .title { color: var(--text); font-weight:700; }
.vidplus-movies .no-key { padding:10px; color: var(--muted); font-size:13px; }

.vidplus-movies .btn-unified, .vidplus-movies .fallback button {
  display:inline-block;
  background: var(--accent-gradient);
  color: var(--play-text);
  border: none;
  padding: 0.8rem 1.6rem;
  font-size: 1.1rem;
  font-weight: 700;
  border-radius: 12px;
  cursor: pointer;
  text-decoration: none;
  box-shadow: 2px 3px 24px -4px var(--primary-shadow);
  transition: transform .2s, box-shadow .2s, background .15s, color .15s;
  line-height:1;
  min-height:44px; min-width:110px; box-sizing:border-box;
}
.vidplus-movies #previewBtn:hover, .vidplus-movies #previewBtn:focus {
  background: var(--accent-gradient) !important;
  color: var(--play-text) !important;
  box-shadow: 2px 3px 24px -4px var(--primary-shadow) !important;
  transform: none !important; outline: none;
}
.vidplus-movies .btn-unified:not(#previewBtn):not(.tab):not(.active):hover {
  background: var(--page-bg);
  color: var(--play-text);
  box-shadow: 0 6px 28px rgba(0,0,0,0.5);
}

.vidplus-movies .seasonField { width:220px; flex:0 0 220px; min-width:0; }

.vidplus-movies[data-view="movies"].mode-movie .searchWrap { flex:1 1 auto; min-width:0; max-width:100%; }
.vidplus-movies[data-view="movies"].mode-movie .seasonField { display:none; }
.vidplus-movies[data-view="movies"].mode-movie .controls { align-items:center; }

.vidplus-movies[data-view="movies"].mode-tv .searchWrap,
.vidplus-movies[data-view="movies"].mode-anime .searchWrap {
  flex: 1 1 auto; min-width:140px; max-width: calc(100% - 240px);
}
.vidplus-movies[data-view="movies"].mode-tv .seasonField,
.vidplus-movies[data-view="movies"].mode-anime .seasonField {
  display:block; flex: 0 0 220px; width: 220px;
}

.vidplus-movies .playHolder { margin-left:auto; display:flex; align-items:flex-end; }

.vidplus-movies .previewWrap {
  margin-top: 18px;
  border-radius: 12px;
  overflow: hidden;
  border: 1px solid color-mix(in srgb, var(--panel) 6%, #000 0%);
  height: 620px;
  background: var(--panel); 
  display: block; 
  position: relative; 
  flex: 0 0 auto;
  max-height: 80vh;
  box-sizing: border-box;
  z-index: 1000;
  transform: translateZ(0);
}

.vidplus-movies .previewWrap iframe {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  border: 0;
  background: transparent;
  display: block;
  z-index: 1010;
  will-change: transform, opacity, filter;
}

.vidplus-movies .previewWrap::before {
  content: "";
  position: absolute;
  inset: 0;
  background: linear-gradient(180deg, color-mix(in srgb, var(--panel) 85%, #000), transparent);
  z-index: 1005;
  pointer-events: none;
  transition: opacity 240ms var(--anim-ease);
  opacity: 1;
}
.vidplus-movies .previewWrap.ready::before { opacity: 0; }

.vidplus-movies .msg { padding:14px; text-align:center; color: var(--muted); background: color-mix(in srgb, black 8%, transparent); }
.vidplus-movies .fallback { display:flex; gap:8px; align-items:center; justify-content:center; padding:12px; }

/* Responsive */
@media (max-width:900px) {
  .vidplus-movies { padding:12px; }
  .vidplus-movies[data-view="movies"].mode-movie .searchWrap,
  .vidplus-movies[data-view="movies"].mode-tv .searchWrap,
  .vidplus-movies[data-view="movies"].mode-anime .searchWrap { flex:1 1 100%; max-width:100%; }
  .vidplus-movies .seasonField { width:100%; flex:1 1 100%; }
  .vidplus-movies .controls { flex-wrap:wrap; align-items:stretch; }
  .vidplus-movies .playHolder { width:100%; justify-content:flex-end; margin-left:0; }
}
@media (max-width:700px) {
  .vidplus-movies .controls { flex-direction:column; align-items:stretch; }
  .vidplus-movies .top { flex-direction:column; align-items:stretch; }
  .vidplus-movies .previewWrap { height:420px; max-height:60vh; }
  .vidplus-movies .results { max-height:300px; }
}

.vidplus-movies { --anim-duration-fast: 140ms; --anim-duration: 360ms; --anim-ease: cubic-bezier(.16,.84,.28,1); }

.vidplus-movies { animation: vidplus-fade-in var(--anim-duration) var(--anim-ease) both; }
@keyframes vidplus-fade-in { from { opacity:0; transform: translateY(6px); } to { opacity:1; transform: translateY(0); } }

.vidplus-movies .tabs { transform: translateX(-28px); opacity: 0; animation: vidplus-slide-in-left 420ms var(--anim-ease) 80ms both; will-change: transform, opacity; }
@keyframes vidplus-slide-in-left { from { transform:translateX(-28px); opacity:0; } to { transform:translateX(0); opacity:1; } }

.vidplus-movies .playHolder,
.vidplus-movies .playHolder .btn-unified,
.vidplus-movies .playHolder #previewBtn {
  transform: translateX(30px);
  opacity: 0;
  animation: vidplus-slide-in-right 420ms var(--anim-ease) 120ms both;
  will-change: transform, opacity;
}
@keyframes vidplus-slide-in-right { from { transform:translateX(30px); opacity:0; } to { transform:translateX(0); opacity:1; } }

.vidplus-movies .searchWrap {
  transform: translateY(-22px);
  opacity: 0;
  animation: vidplus-search-slide-top 420ms var(--anim-ease) 40ms both;
  will-change: transform, opacity;
}
@keyframes vidplus-search-slide-top { from { transform:translateY(-22px); opacity:0; } to { transform:translateY(0); opacity:1; } }

.vidplus-movies .top .title,
.vidplus-movies .searchWrap .title,
.vidplus-movies .title {
  transform: translateY(-18px);
  opacity: 0;
  animation: vidplus-slide-in-top 380ms var(--anim-ease) 60ms both;
  will-change: transform, opacity;
}
@keyframes vidplus-slide-in-top { from { transform:translateY(-18px); opacity:0; } to { transform:translateY(0); opacity:1; } }

.vidplus-movies[data-view="movies"].mode-tv .seasonField,
.vidplus-movies[data-view="movies"].mode-anime .seasonField {
  transform: translateX(26px);
  opacity: 0;
  animation: vidplus-season-slide-rtl 360ms var(--anim-ease) 160ms both;
  will-change: transform, opacity;
}
@keyframes vidplus-season-slide-rtl { from { transform:translateX(26px); opacity:0; } to { transform:translateX(0); opacity:1; } }

.vidplus-movies .previewWrap {
  transform: translateY(12px);
  opacity: 0;
  animation: vidplus-preview-wrap-up 420ms var(--anim-ease) 160ms both;
  will-change: transform, opacity;
}
@keyframes vidplus-preview-wrap-up { from { transform:translateY(12px); opacity:0; } to { transform:translateY(0); opacity:1; } }

.vidplus-movies .previewWrap iframe {
  transform: translateY(22px);
  opacity: 0;
  animation: vidplus-iframe-up 520ms var(--anim-ease) 260ms both;
  will-change: transform, opacity, filter;
}
@keyframes vidplus-iframe-up { from { transform:translateY(22px); opacity:0; filter: blur(6px); } to { transform:translateY(0); opacity:1; filter: blur(0); } }

.vidplus-movies .results { transform-origin: top center; animation: vidplus-results-pop var(--anim-duration) var(--anim-ease) both; }
@keyframes vidplus-results-pop { from { opacity:0; transform:translateY(-6px) scaleY(.985); } to { opacity:1; transform:translateY(0) scaleY(1); } }
.vidplus-movies .result { transition: background var(--anim-duration-fast) var(--anim-ease), transform var(--anim-duration-fast) var(--anim-ease), box-shadow var(--anim-duration-fast) var(--anim-ease); will-change: transform, background; }
.vidplus-movies .result:hover { transform: translateX(6px); }

.vidplus-movies .poster { transform-origin:center; animation: vidplus-poster-pop 420ms var(--anim-ease) both; }
@keyframes vidplus-poster-pop { from { opacity:0; transform:scale(.96) translateY(4px); } to { opacity:1; transform:scale(1) translateY(0); } }

.vidplus-movies .tab { transition: background var(--anim-duration-fast) var(--anim-ease), color var(--anim-duration-fast) var(--anim-ease), box-shadow var(--anim-duration-fast) var(--anim-ease), transform var(--anim-duration-fast) var(--anim-ease); transform: translateZ(0); }
.vidplus-movies .tab:not(.active):hover { transform: translateY(-3px) scale(1.01); }
.vidplus-movies .tab.active { animation: vidplus-tab-glow 900ms infinite linear; }
@keyframes vidplus-tab-glow { 0% { box-shadow:2px 3px 24px -10px rgba(0,0,0,0); } 50% { box-shadow:2px 3px 32px -2px color-mix(in srgb, var(--accent-gradient) 55%, transparent); } 100% { box-shadow:2px 3px 24px -10px rgba(0,0,0,0); } }

@media (prefers-reduced-motion: reduce) {
  .vidplus-movies *, .vidplus-movies *::before, .vidplus-movies *::after { animation-duration: 1ms !important; animation-iteration-count: 1 !important; transition-duration: 1ms !important; }
  .vidplus-movies .tabs, .vidplus-movies .playHolder, .vidplus-movies .searchWrap, .vidplus-movies .top .title, .vidplus-movies .searchWrap .title, .vidplus-movies .previewWrap, .vidplus-movies .previewWrap iframe, .vidplus-movies .seasonField {
    animation: none !important; transition: none !important; transform: none !important; opacity: 1 !important; filter: none !important;
  }
}
